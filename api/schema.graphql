scalar Date

type Product {
	id: ID!
	name: String!
	image_link: String!
	description: String!
	available_stocks: Int!
	price: Int!
	is_negotiable: Boolean!
	owner_id: Int!
	company_id: Int
	likes: Int!
	sold: Boolean!
	category: String!
}

type Company {
  id: ID!
  name: String!
}

type Category {
  id: ID!
  name: String!
  value: String!
}

type User {
  id: ID!
  username: String!
  email: String!
  full_name: String!
  address: String!
  phone_number: String!
  payment_method: String!
  company_id: Int
}

type AuthResponse {
  user: User!
  token: String!
  refreshToken: String!
}

type SignupResponse {
  user: User!
  message: String!
}

type CartItem {
  id: ID!
  user_id: Int!
  product_id: Int!
  quantity: Int!
  product: Product!
}

type Cart {
  items: [CartItem!]!
  total_items: Int!
  total_price: Int!
}

type Query {
  getUser(id: ID!): User
  listUsers: [User!]!
  getCompanies: [Company!]!
  getCompany(id: ID!): Company
  categories: [Category!]!
  getProducts(category: String, sold: Boolean, isNegotiable: Boolean, search: String): [Product!]!
  getProduct(id: ID!): Product
  getProductsAdvanced(
    search: String
    minPrice: Int
    maxPrice: Int
    minStock: Int
    sold: Boolean
    companyId: Int
    sortBy: String
    limit: Int = 20
    offset: Int = 0
  ): [Product!]!
  getProductsByOwner(ownerId: ID!): [Product!]!
  getProductCount(
    search: String
    minPrice: Int
    maxPrice: Int
    minStock: Int
    sold: Boolean
    companyId: Int
  ): Int!
  getCart: Cart!
  getCartItemCount: Int!
}

type Mutation {
  createUser(
    input: UserInput!
  ): SignupResponse!

  verifyEmail(
    token: String!
  ): AuthResponse!

  updateUser(
    id: ID!
    input: UpdateUserInput!
  ): User!

  deleteUser(id: ID!): Boolean!
  createCompany(name: String!): Company!
  updateCompany(id: ID!, name: String!): Company!
  createProduct(input: CreateProductInput!): Product!
  updateProduct(id: ID!, input: UpdateProductInput!): Product!
  deleteProduct(id: ID!): Boolean!
  deleteCompany(id: ID!): Boolean!

  login(
    email: String!
    password: String!
  ): AuthResponse!

  refreshToken(
    token: String!
  ): AuthResponse!

  addToCart(productId: ID!, quantity: Int!): CartItem!
  updateCartItemQuantity(productId: ID!, quantity: Int!): CartItem!
  removeFromCart(productId: ID!): Boolean!
  clearCart: Boolean!
}

input UserInput {
  username: String!
  password: String!
  email: String!
  full_name: String!
  address: String!
  phone_number: String!
  payment_method: String!
  company_id: Int
}

input UpdateUserInput {
  username: String
  password: String
  email: String
  full_name: String
  address: String
  phone_number: String
  payment_method: String
  company_id: Int
}

input UpdateProductInput {
	name: String
	image_link: String
	description: String
	available_stocks: Int
	price: Int
	is_negotiable: Boolean
	sold: Boolean
	category: String
}

input CreateProductInput {
	name: String!
	image_link: String!
	description: String!
	available_stocks: Int!
	price: Int!
	is_negotiable: Boolean!
	owner_id: Int!
	company_id: Int
	category: String!
}
